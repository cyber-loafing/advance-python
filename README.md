# Advanced Python Tips
scriptsè„šæœ¬è‡ªåŠ¨å°†tipä¸­çš„jupyter notebookç¬”è®°è½¬æ¢ä¸ºREADME.mdæ–‡ä»¶

---

* [1. args](#1-args)
* [2. copy_deepcopy](#2-copy_deepcopy)
* [3. dataclass](#3-dataclass)
* [4. decorators](#4-decorators)
* [5. exception](#5-exception)
* [6. iterator_generator](#6-iterator_generator)
* [7. lambda](#7-lambda)
* [8. ListComp_GenerateExpr](#8-ListComp_GenerateExpr)
* [9. magic _function](#9-magic-_function)
* [10. numerical](#10-numerical)
* [11. pass](#11-pass)
* [12. ternary_op](#12-ternary_op)
* [13. textcolor](#13-textcolor)

---

# 1. args
## args and kwargs
*args å’Œ **kwargs æ˜¯ Python ä¸­ç”¨äºå¤„ç†ä¸ç¡®å®šæ•°é‡å‚æ•°çš„ç‰¹æ®Šç¬¦å·ã€‚å®ƒä»¬çš„å‘½åå¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œåœ¨ä¹¦å†™ä»£ç æ—¶å¯ä»¥è‡ªå·±é€‰æ‹©ã€‚*args è¡¨ç¤ºä¸ç¡®å®šæ•°é‡çš„éé”®å€¼å¯¹çš„å‚æ•°ï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°ã€‚åœ¨å‡½æ•°å®šä¹‰æ—¶ä½¿ç”¨ *args å¯ä»¥å°†æ‰€æœ‰ä½ç½®å‚æ•°è½¬ä¸ºä¸€ä¸ªå…ƒç»„å½¢å¼ï¼Œå¹¶ä¼ é€’ç»™å‡½æ•°ä½“å†…çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚

**kwargs è¡¨ç¤ºä¸ç¡®å®šæ•°é‡çš„é”®å€¼å¯¹å‚æ•°ï¼Œå¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°ã€‚åœ¨å‡½æ•°å®šä¹‰æ—¶ä½¿ç”¨ **kwargs å¯ä»¥å°†æ‰€æœ‰å…³é”®å­—å‚æ•°è½¬ä¸ºä¸€ä¸ªå­—å…¸å½¢å¼ï¼Œå¹¶ä¼ é€’ç»™å‡½æ•°ä½“å†…çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚ã€‚


```python
def f(*args,**kwargs):
    print(args)
    print(kwargs)

f(1,2,3,4,5,6,7,8,9,10, a=1,b=2,c=3,d=4,e=5,f=6,g=7,h=8,i=9,j=10)
```

    (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
    {'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5, 'f': 6, 'g': 7, 'h': 8, 'i': 9, 'j': 10}
    

## è¡¥å……ï¼Œ*è¿ç®—ç¬¦
1. æ”¶é›†åˆ—è¡¨ä¸­çš„å¤šä½™çš„å€¼



```python
a, *b, c = [1, 2, 3, 4, 5]
print(a)
print(b)
print(c)
```

    1
    [2, 3, 4]
    5
    

# 2. copy_deepcopy
## æµ…å¤åˆ¶
é¦–å…ˆæ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼šç­‰äºèµ‹å€¼å’Œæ·±å¤åˆ¶ã€‚
- ç­‰äºèµ‹å€¼ï¼Œå¹¶ä¸ä¼šäº§ç”Ÿä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡å•ç‹¬å­˜åœ¨ï¼Œä»–åªæ˜¯å°†åŸæœ‰çš„æ•°æ®å—æ‰“ä¸Šä¸€ä¸ªæ–°æ ‡ç­¾ï¼Œæ‰€ä»¥å½“å…¶ä¸­ä¸€ä¸ªæ ‡ç­¾è¢«æ”¹å˜çš„æ—¶å€™ï¼Œæ•°æ®å—å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¦ä¸€ä¸ªæ ‡ç­¾ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚å¯¹äºä¸å¯å˜å¯¹è±¡ï¼Œç­‰äºèµ‹å€¼å’Œæ·±å¤åˆ¶æ²¡æœ‰åŒºåˆ«ã€‚ä½†æ˜¯å¯¹äºå¯å˜å¯¹è±¡ï¼Œç­‰äºèµ‹å€¼å…¶å®æ˜¯å°†ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¸€ä¸ªå˜é‡æ”¹å˜ï¼Œå¦ä¸€ä¸ªå˜é‡ä¹Ÿä¼šæ”¹å˜ã€‚
- æ·±å¤åˆ¶(deep copy)ï¼Œå³å°†è¢«å¤åˆ¶å¯¹è±¡å®Œå…¨å†å¤åˆ¶ä¸€éä½œä¸ºç‹¬ç«‹çš„æ–°ä¸ªä½“å•ç‹¬å­˜åœ¨ã€‚æ‰€ä»¥æ”¹å˜åŸæœ‰è¢«å¤åˆ¶å¯¹è±¡ä¸ä¼šå¯¹å·²ç»å¤åˆ¶å‡ºæ¥çš„æ–°å¯¹è±¡äº§ç”Ÿå½±å“ã€‚
- æµ…å¤åˆ¶(shallow copy)éœ€è¦åˆ†æƒ…å†µï¼Œæµ…æ‹·è´åŒ…æ‹¬ä¸‰ç§å½¢å¼ï¼šåˆ‡ç‰‡ã€å·¥å‚å‡½æ•°ã€ä»¥åŠcopyæ¨¡å—
    1. å½“æµ…å¤åˆ¶çš„å€¼æ˜¯ä¸å¯å˜å¯¹è±¡ï¼ˆæ•°å€¼ï¼Œå­—ç¬¦ä¸²ï¼Œå…ƒç»„ï¼‰æ—¶å’Œâ€œç­‰äºèµ‹å€¼â€çš„æƒ…å†µä¸€æ ·ï¼Œå¯¹è±¡çš„idå€¼ä¸æµ…å¤åˆ¶åŸæ¥çš„å€¼ç›¸åŒã€‚å½“åŸå€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæµ…å¤åˆ¶çš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚
    2. å½“æµ…å¤åˆ¶çš„å€¼æ˜¯å¯å˜å¯¹è±¡ï¼ˆåˆ—è¡¨å’Œå…ƒç»„ï¼‰æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªâ€œä¸æ˜¯é‚£ä¹ˆç‹¬ç«‹çš„å¯¹è±¡â€å­˜åœ¨ã€‚æœ‰ä¸¤ç§æƒ…å†µï¼š
        1. å¤åˆ¶çš„ å¯¹è±¡ä¸­**æ— å¤æ‚å­å¯¹è±¡** ï¼ŒåŸæ¥å€¼çš„æ”¹å˜å¹¶ä¸ä¼šå½±å“æµ…å¤åˆ¶çš„å€¼ï¼ŒåŒæ—¶æµ…å¤åˆ¶çš„å€¼æ”¹å˜ä¹Ÿå¹¶ä¸ä¼šå½±å“åŸæ¥çš„å€¼ã€‚åŸæ¥å€¼çš„idå€¼ä¸æµ…å¤åˆ¶åŸæ¥çš„å€¼ä¸åŒã€‚
        2. å¤åˆ¶çš„å¯¹è±¡ä¸­æœ‰å¤æ‚å­å¯¹è±¡ ï¼ˆä¾‹å¦‚åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå­å…ƒç´ æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼‰ï¼Œå¦‚æœä¸æ”¹å˜å…¶ä¸­å¤æ‚å­å¯¹è±¡ï¼Œæµ…å¤åˆ¶çš„å€¼æ”¹å˜å¹¶ä¸ä¼šå½±å“åŸæ¥çš„å€¼ã€‚ ä½†æ˜¯æ”¹å˜åŸæ¥çš„å€¼ ä¸­çš„å¤æ‚å­å¯¹è±¡çš„å€¼  ä¼šå½±å“æµ…å¤åˆ¶çš„å€¼ã€‚


å»ºè®®ï¼Œå¯¹äºä¸å¯å˜å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨ç­‰äºèµ‹å€¼ï¼Œå¯¹äºå¯å˜å¯¹è±¡ï¼Œå¦‚æœä¸éœ€è¦æ”¹å˜åŸæ¥çš„å€¼ï¼Œä½¿ç”¨æµ…å¤åˆ¶ï¼Œå¦‚æœéœ€è¦æ”¹å˜åŸæ¥çš„å€¼ï¼Œä½¿ç”¨æ·±å¤åˆ¶ã€‚

å¯¹äºå¤šå±‚åµŒå¥—å¯¹è±¡ä¸€å®šè¦ä½¿ç”¨æ·±æ‹·è´


```python
# æµ…å¤åˆ¶,ä¸å¯å˜å¯¹è±¡
a = 10
b = a
print(id(a))
print(id(b))
b = 20
print(a, b)
print(id(a))
print(id(b))
a = 'hello'
print(id(a))
```

    2796225364496
    2796225364496
    10 20
    2796225364496
    2796225364816
    2796296201200
    


```python
# æµ…å¤åˆ¶ï¼Œå¯å˜å¯¹è±¡,æ— å¤æ‚å­å¯¹è±¡
import copy
a = [1, 2, 3]
b = a
c = a.copy()
d = copy.deepcopy(a)
print(id(a))
print(id(b))
print(id(c))
print(id(d))
b[0] = 10
print(a, b, c, d) # æ³¨æ„è¿™é‡Œçš„c,dçš„å€¼å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–,è¯æ˜å¯¹äºæ— å¤æ‚å­å¯¹è±¡çš„å¯å˜å¯¹è±¡ï¼Œæµ…å¤åˆ¶å’Œæ·±å¤åˆ¶æ˜¯ä¸€æ ·çš„
```

    2796308855296
    2796308855296
    2796309106176
    2796308975168
    [10, 2, 3] [10, 2, 3] [1, 2, 3] [1, 2, 3]
    


```python
# æµ…å¤åˆ¶ï¼Œå¯å˜å¯¹è±¡,æœ‰å¤æ‚å­å¯¹è±¡
a = [1, 2, [3, 4]]
b = a
c = a.copy()
d = copy.deepcopy(a)
print(id(a))
print(id(b))
print(id(c))
print(id(d))
b[0] = 10
b[2][0] = 30
print(a, b, c, d) # æ³¨æ„è¿™é‡Œçš„cçš„å€¼ç”±äºæœ‰å¤æ‚å­å¯¹è±¡ï¼Œæ‰€ä»¥å‘ç”Ÿäº†å˜åŒ–ï¼Œä½†æ˜¯dçš„å€¼å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œè¯æ˜å¯¹äºæœ‰å¤æ‚å­å¯¹è±¡çš„å¯å˜å¯¹è±¡ï¼Œæµ…å¤åˆ¶å’Œæ·±å¤åˆ¶æ˜¯ä¸ä¸€æ ·çš„
```

    2796308854080
    2796308854080
    2796306020096
    2796308719296
    [10, 2, [30, 4]] [10, 2, [30, 4]] [1, 2, [30, 4]] [1, 2, [3, 4]]
    

# 3. dataclass
```python

```

# 4. decorators
## æ¦‚å¿µ

è£…é¥°å™¨æ˜¯ç»™ç°æœ‰çš„æ¨¡å—å¢æ·»æ–°çš„å°åŠŸèƒ½ï¼Œå¯ä»¥å¯¹åŸå‡½æ•°è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œè€Œä¸”è¿˜ä¸éœ€è¦ä¿®æ”¹åŸå‡½æ•°çš„å†…å®¹ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹åŸå‡½æ•°çš„è°ƒç”¨ã€‚

è£…é¥°å™¨çš„ä½¿ç”¨ç¬¦åˆäº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¼€æ”¾å°é—­åŸåˆ™ã€‚

> å¼€æ”¾å°é—­åŸåˆ™ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š
> - å¯¹æ‰©å±•å¼€æ”¾ï¼Œæ„å‘³ç€æœ‰æ–°çš„éœ€æ±‚æˆ–å˜åŒ–æ—¶ï¼Œå¯ä»¥å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ‰©å±•ï¼Œä»¥é€‚åº”æ–°çš„æƒ…å†µã€‚
> - å¯¹ä¿®æ”¹å°é—­ï¼Œæ„å‘³ç€ç±»ä¸€æ—¦è®¾è®¡å®Œæˆï¼Œå°±å¯ä»¥ç‹¬ç«‹å…¶å·¥ä½œï¼Œè€Œä¸è¦å¯¹ç±»å°½ä»»ä½•ä¿®æ”¹ã€‚

### æ‹“å±•ï¼šå‡½æ•°é—­åŒ…
åœ¨Pythonä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å¯¹è±¡ï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚å‡½æ•°é—­åŒ…æ˜¯æŒ‡å‡½æ•°å¯ä»¥è®¿é—®å…¶å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚é—­åŒ…å‡½æ•°æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š
1. é—­åŒ…å‡½æ•°æ˜¯å‡½æ•°çš„åµŒå¥—ï¼Œå‡½æ•°å†…è¿˜æœ‰å‡½æ•°ï¼Œå³å¤–å±‚å‡½æ•°åµŒå¥—ä¸€ä¸ªå†…å±‚å‡½æ•°
2. åœ¨å¤–å±‚å‡½æ•°å®šä¹‰å±€éƒ¨å˜é‡ï¼Œåœ¨å†…å±‚å‡½æ•°é€šè¿‡nonlocalå¼•ç”¨ï¼Œå¹¶å®ç°æŒ‡å®šåŠŸèƒ½ï¼Œæ¯”å¦‚è®¡æ•°
3. æœ€åå¤–å±‚å‡½æ•°returnå†…å±‚å‡½æ•°
4. ä¸»è¦ä½œç”¨ï¼šå¯ä»¥å˜ç›¸å®ç°ç§æœ‰å˜é‡çš„åŠŸèƒ½ï¼Œå³ç”¨å†…å±‚å‡½æ•°è®¿é—®å¤–å±‚å‡½æ•°å†…çš„å˜é‡ï¼Œå¹¶è®©å¤–å±‚å‡½æ•°å†…çš„å˜é‡å¸¸é©»å†…å­˜

æ¯”å¦‚ä¸‹é¢ä»£ç ä¸­é—­åŒ…å‡½æ•°ä¹‹æ‰€ä»¥å¯ä»¥å®ç°è®©å¤–å±‚å‡½æ•°å†…çš„å˜é‡å¸¸é©»å†…å­˜ï¼Œå…³é”®å°±æ˜¯å…¶å®šä¹‰äº†ä¸ª*å†…å±‚å‡½æ•°*ï¼Œå¹¶é€šè¿‡å†…å±‚å‡½æ•°è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡ï¼Œå¹¶æœ€åç”±å¤–å±‚å‡½æ•°å°†å†…å±‚å‡½æ•°è¿”å›å‡ºå»å¹¶èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡ã€‚*æ­¤æ—¶å› ä¸ºå†…å±‚å‡½æ•°è¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå…¶å†…å­˜ç©ºé—´ä¸ä¼šè¢«é‡Šæ”¾*ï¼Œè€Œå†…å±‚å‡½æ•°åˆåœ¨å…¶å‡½æ•°ä½“å†…*å¼•ç”¨äº†å¤–å±‚å‡½æ•°çš„å˜é‡*ï¼Œå¯¼è‡´è¯¥å˜é‡çš„å†…å­˜ä¹Ÿä¸ä¼šè¢«å›æ”¶ã€‚


```python
#å¤–å±‚å‡½æ•°
def outter_func():
    #å®šä¹‰å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡
    a=0
    #å®šä¹‰ä¸€ä¸ªå†…å±‚å‡½æ•°
    def inner_func():
        #å£°æ˜ä¸‹åœ¨å†…å±‚å‡½æ•°å†…ï¼Œaå˜é‡æŒ‡å‘åˆ°å¤–å±‚å‡½æ•°çš„a
        nonlocal a
        a+=1
        print(a, end=' ')
    #è¿”å›å†…å±‚å‡½æ•°
    return inner_func # æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯å‡½æ•°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„è°ƒç”¨

counter=outter_func() # counteræ˜¯inner_funcå‡½æ•°å¯¹è±¡ï¼Œcounter = inner_func
for i in range(10):
    counter()
```

    1 2 3 4 5 6 7 8 9 10 

#### å¦‚ä½•åˆ¤æ–­é—­åŒ…å‡½æ•°


```python
def outter_func():
    #å®šä¹‰å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡
    a=0
    #å®šä¹‰ä¸€ä¸ªå†…å±‚å‡½æ•°
    def inner_func():
        #å£°æ˜ä¸‹åœ¨å†…å±‚å‡½æ•°å†…ï¼Œaå˜é‡æŒ‡å‘åˆ°å¤–å±‚å‡½æ•°çš„a
        nonlocal a
        a+=1
        print(a, end=' ')
    #è¿”å›å†…å±‚å‡½æ•°
    print(inner_func.__closure__) # åˆ¤æ–­æ˜¯å¦æ˜¯é—­åŒ…å‡½æ•°ï¼Œå¦‚æœæ˜¯é—­åŒ…å‡½æ•°ï¼Œè¿”å›çš„æ˜¯cellå¯¹è±¡ï¼Œå¦åˆ™è¿”å›None
    return inner_func # æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯å‡½æ•°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„è°ƒç”¨

counter=outter_func() # counteræ˜¯inner_funcå‡½æ•°å¯¹è±¡ï¼Œcounter = inner_func
counter()
```

    (<cell at 0x000001C5A0B33100: int object at 0x000001C59C2100D0>,)
    1 


### å‡½æ•°è£…é¥°å™¨çš„å®ç°
å‡½æ•°è£…é¥°å™¨çš„å®ç°ä¸»è¦æ˜¯é€šè¿‡é—­åŒ…å‡½æ•°å®ç°çš„ï¼Œå³åœ¨å¤–å±‚å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªå†…å±‚å‡½æ•°ï¼Œå†…å±‚å‡½æ•°å®ç°å…·ä½“çš„åŠŸèƒ½ï¼Œå¤–å±‚å‡½æ•°è¿”å›å†…å±‚å‡½æ•°ã€‚åœ¨å¤–å±‚å‡½æ•°ä¸­å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç„¶ååœ¨å†…å±‚å‡½æ•°ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶å®ç°å…·ä½“çš„åŠŸèƒ½ã€‚


```python
# æœ€ç»ˆç‰ˆæœ¬
from functools import wraps
import time
def count_time(func):
    @wraps(func) # å¼•å…¥wrapsï¼Œå¯¹å†…å±‚å®ç°è£…é¥°å™¨åŠŸèƒ½çš„å‡½æ•°è¿›è¡Œè£…é¥°ï¼Œä¸»è¦æ˜¯å°†ä¼ å…¥çš„è¢«è£…é¥°å‡½æ•°å…ƒä¿¡æ¯å¤åˆ¶ç»™å…·ä½“å®ç°è£…é¥°å™¨åŠŸèƒ½å‡½æ•°
    def wrapper(*args, **kwargs):
        print(f'å¼€å§‹è¿è¡Œ{func.__name__}å‡½æ•°')
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        print(f'{func.__name__}è¿è¡Œæ—¶é—´ä¸ºï¼š{end_time - start_time}')
        return result
    return wrapper
@count_time
def add(a : int, b : int) -> int:
    time.sleep(1)
    print(f'{a} + {b} = {a + b}')
    return a + b

add(1, 2)
print(add.__name__) # å¦‚æœä¸åŠ wrapsï¼Œè¿™é‡Œä¼šè¾“å‡ºwrapperï¼Œå°±æ˜¯innerå‡½æ•°çš„åå­—

```

    å¼€å§‹è¿è¡Œaddå‡½æ•°
    1 + 2 = 3
    addè¿è¡Œæ—¶é—´ä¸ºï¼š1.0080552101135254
    add
    

#### å¸¦å‚æ•°çš„è£…é¥°å™¨
å¸¦å‚æ•°è£…é¥°å™¨ï¼Œå³å¯ä»¥å‘è£…é¥°å™¨ä¼ å‚ï¼Œä»¥ä¸ºè£…é¥°å™¨èµ‹äºˆä¸ªæ€§åŒ–å®šåˆ¶çš„ç‰¹ç‚¹ï¼Œæ ¹æ®ä¼ å…¥å‚æ•°ä¸åŒï¼Œè£…é¥°å™¨è¡¨ç°è¡Œä¸ºä¸åŒç­‰ç­‰ï¼Œæ­¤æ—¶ï¼Œéœ€è¦å†åŠ ä¸€å±‚å‡½æ•°åµŒå¥—ï¼Œæœ€å¤–å±‚å‡½æ•°ä¸»è¦å®ç°ä¼ å‚çš„åŠŸèƒ½ï¼Œç„¶åè¿”å›ç¬¬äºŒå±‚å‡½æ•°ï¼Œæ­¤æ—¶å°±åˆé€€åŒ–æˆäº†ä¸¤å±‚åµŒå¥—ï¼Œå³ä¸å¸¦å‚è£…é¥°å™¨

1. æœ‰ä¸‰å±‚å‡½æ•°åµŒå¥—ï¼Œæœ€å¤–å±‚å‡½æ•°ä¸»è¦æ˜¯æ¥å—è£…é¥°å™¨çš„å‚æ•°ï¼Œå®ç°é—­åŒ…ï¼Œå¸¸é©»å†…å­˜ï¼Œä¾›å…¶å†…å±‚å‡½æ•°ä½¿ç”¨ï¼Œç„¶åreturn ç¬¬äºŒå±‚å‡½æ•°
2. ç¬¬äºŒå±‚å‡½æ•°ä¸ä¸å¸¦å‚æƒ…å†µä¸‹ï¼ŒåŸºæœ¬ä¸€æ ·
3. ç¬¬ä¸‰å±‚å‡½æ•°è¿˜æ˜¯æœ€ç»ˆå®ç°è£…é¥°å™¨åŠŸèƒ½



```python
def dec_with_args(*args): # ç¬¬ä¸€å±‚å‡½æ•°ï¼Œæ¥å—è£…é¥°å™¨çš„å‚æ•°ï¼Œå®ç°é—­åŒ…ï¼Œè¿”å›ç¬¬äºŒå±‚å‡½æ•°
    def dec(func): # ç¬¬äºŒå±‚å‡½æ•°ï¼Œæ¥å—è¢«è£…é¥°å‡½æ•°ï¼Œè¿”å›ç¬¬ä¸‰å±‚å‡½æ•°ï¼Œå®é™…ä¸Šä¸ä¸å¸¦å‚æƒ…å†µä¸‹çš„è£…é¥°å™¨ä¸€æ · #|
        @wraps(func)                                                              #|
        def in_dec(*args): # ç¬¬ä¸‰å±‚å‡½æ•°ï¼Œå®ç°å…·ä½“è£…é¥°å™¨åŠŸèƒ½                             #|
            """                                                                   #| è¿™äº›ä½ç½®å®é™…ä¸Šå°±æ˜¯ä¸å¸¦å‚è£…é¥°å™¨çš„å®ç°
            your decorator code                                                   #|
            """                                                                   #|
            return func(*args)                                                    #|
        return in_dec                                                             #|
    return dec

# ä»ç„¶æ˜¯è®¡æ—¶å™¨çš„ä¾‹å­, ä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬å¯ä»¥ä¼ å…¥å‚æ•°, ç”¨æ¥æ§åˆ¶æ˜¯å¦æ‰“å°å‡½æ•°çš„åå­—
def count_time_v2(print_func_name: bool = True):
    def dec(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            if print_func_name:
                print(f'å¼€å§‹è¿è¡Œ{func.__name__}å‡½æ•°')
            start_time = time.time()
            result = func(*args, **kwargs)
            end_time = time.time()
            print(f'{func.__name__}è¿è¡Œæ—¶é—´ä¸ºï¼š{end_time - start_time}')
            return result
        return wrapper
    return dec

@count_time_v2(print_func_name=False)
def add(a : int, b : int) -> int:
    time.sleep(1)
    print(f'{a} + {b} = {a + b}')
    return a + b
add(1, 2)
```

    1 + 2 = 3
    addè¿è¡Œæ—¶é—´ä¸ºï¼š1.0088813304901123
    




    3



#### å¯¹äºwrapsçš„å®ç°


```python
def my_wraps(fwrap):
    def out_func(func):
        def in_func(*args,**kwargs):
            return func(*args,**kwargs)
        meta_info = ['__module__', '__name__', '__qualname__', '__doc__', '__annotations__']
        for meta in meta_info:
            setattr(in_func, meta, getattr(fwrap, meta))
        return in_func
    return out_func

def count_time_v3(func):
    @my_wraps(func)
    def wrapper(*args, **kwargs):
        print(f'å¼€å§‹è¿è¡Œ{func.__name__}å‡½æ•°')
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        print(f'{func.__name__}è¿è¡Œæ—¶é—´ä¸ºï¼š{end_time - start_time}')
        return result
    return wrapper

@count_time_v3
def add(a : int, b : int) -> int:
    time.sleep(1)
    print(f'{a} + {b} = {a + b}')
    return a + b
add(1, 2)
print(add.__name__)
```

    å¼€å§‹è¿è¡Œaddå‡½æ•°
    1 + 2 = 3
    addè¿è¡Œæ—¶é—´ä¸ºï¼š1.006812334060669
    add
    

### ç±»è£…é¥°å™¨
è£…é¥°å™¨è¿˜å¯ä»¥é€šè¿‡ç±»æ¥å®ç°ï¼Œå…¶å®ä¸»è¦æ˜¯åˆ©ç”¨ç±»çš„ä»¥ä¸‹ç‰¹ç‚¹æ¥å˜ç›¸å®ç°å‡½æ•°è£…é¥°å™¨åŠŸèƒ½ï¼š

1. å‡½æ•°è°ƒç”¨è¯­è¯­æ³•f()ç­‰åŒäºç±»çš„å®ä¾‹åŒ–ï¼Œå³è°ƒç”¨ç±»çš„__init__å‡½æ•°åˆ›å»ºå¯¹è±¡
2. å¯¹è±¡çš„è°ƒç”¨obj()ç­‰åŒäºè¿è¡Œå¯¹è±¡çš„__call__é­”æ³•å‡½æ•°
3. é€šè¿‡ç±»å®ç°è£…é¥°å™¨ï¼Œå¯ä»¥é¿å…å‡½æ•°è£…é¥°å™¨è¶…è¿‡2å±‚çš„åµŒå¥—æƒ…å†µï¼Œå› ä¸ºå¦‚æœæœ‰ä¸‰å±‚çš„è¯ï¼Œæœ€å¤–å±‚å‡½æ•°å¯ä»¥è®¤ä¸ºæ˜¯åœ¨è°ƒç”¨ç±»çš„__init__å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥è®©ä»£ç æ›´æ˜“è¯»å’Œç»´æŠ¤
4. æœ¬è´¨ï¼Œåªè¦å®ç°ç±»çš„__init__å’Œ__call__é­”æ³•å‡½æ•°ï¼Œå¹¶åœ¨__init__å‡½æ•°å†…æ¥å—è£…é¥°å™¨å‚æ•°ï¼Œåœ¨__call__å‡½æ•°å†…å®ç°å…·ä½“è£…é¥°å™¨ç»“æ„å³å¯



```python
class CountTime:
    def __init__(self, func):
        self.func = func
    def __call__(self, *args, **kwargs):
        print(f'å¼€å§‹è¿è¡Œ{self.func.__name__}å‡½æ•°')
        start_time = time.time()
        result = self.func(*args, **kwargs)
        end_time = time.time()
        print(f'{self.func.__name__}è¿è¡Œæ—¶é—´ä¸ºï¼š{end_time - start_time}')
        return result

@CountTime
def add(a : int, b : int) -> int:
    time.sleep(1)
    print(f'{a} + {b} = {a + b}')
    return a + b

add(1, 2)
# print(add.__name__)
```

    å¼€å§‹è¿è¡Œaddå‡½æ•°
    1 + 2 = 3
    addè¿è¡Œæ—¶é—´ä¸ºï¼š1.0015771389007568
    




    3



## ä½¿ç”¨åœºæ™¯

https://blog.csdn.net/weixin_52908342/article/details/136575100

### æ—¥å¿—è®°å½•


```python
import logging

def log_decorator(func):
    def wrapper(*args, **kwargs):
        logging.info(f"Calling {func.__name__} with args: {args} and kwargs: {kwargs}")
        result = func(*args, **kwargs)
        logging.info(f"{func.__name__} returned: {result}")
        return result
    return wrapper

@log_decorator
def add(x, y):
    return x + y
logging.basicConfig(level=logging.INFO)
result = add(3, 4)
print(result)  # è¾“å‡ºï¼š7

```

    INFO:root:Calling add with args: (3, 4) and kwargs: {}
    INFO:root:add returned: 7
    

    7
    

### ä½¿ç”¨è£…é¥°å™¨ç¼“å­˜
åœ¨è®¡ç®—feiboæ•°åˆ—çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è£…é¥°å™¨ç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—,

@lru_cache æ˜¯æœ€å¸¸è§çš„ç¼“å­˜è£…é¥°å™¨ã€‚lru_cache æ˜¯ï¼š Last recently used cache çš„ç®€å†™ï¼Œå¯ä»¥å°†è¯¥å‡½æ•°æœ€è¿‘è°ƒç”¨çš„è¾“å…¥å‚æ•°ä»¥åŠç»“æœè¿›è¡Œç¼“å­˜ã€‚å¦‚æœæœ‰æ–°çš„è°ƒç”¨ï¼Œå…ˆæ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰ç›¸åŒçš„è¾“å…¥å‚æ•°ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›å¯¹åº”ç»“æœã€‚å¦‚æœæ˜¯æ— å‚å‡½æ•°ï¼Œç¬¬1æ¬¡è°ƒç”¨åï¼Œä»¥åæ¯æ¬¡è°ƒç”¨ï¼Œç›´æ¥è¿”å›ç¼“å­˜ç»“æœã€‚


```python
from functools import lru_cache

def cache_with_parameters(maxsize=128, typed=False):
    def decorator(func):
        @lru_cache(maxsize=maxsize, typed=typed)
        def wrapper(*args, **kwargs):
            print(f"ç¼“å­˜å‚æ•°ï¼šmaxsize={maxsize}, typed={typed}", end=' ')
            # å½“å‰ä½¿ç”¨äº†å¤šå°‘ç¼“å­˜
            print(f"å½“å‰ç¼“å­˜æ•°ï¼š{wrapper.cache_info().currsize}", end=' ')
            result = func(*args, **kwargs)
            return result
        return wrapper
    return decorator

@cache_with_parameters(maxsize=256, typed=True)
def fibonacci(n):
    if n <= 1:
        return n
    else:
        return fibonacci(n-1) + fibonacci(n-2)

for i in range(10):
    print(fibonacci(i))
```

    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š0 0
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š1 1
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š2 1
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š3 2
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š4 3
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š5 5
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š6 8
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š7 13
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š8 21
    ç¼“å­˜å‚æ•°ï¼šmaxsize=256, typed=True å½“å‰ç¼“å­˜æ•°ï¼š9 34
    

# 5. exception
## å¼‚å¸¸å¤„ç†


```python
try:
    # ä¸»ä»£ç å—
    print('try 0/0 ')
    a = 0 / 0
    pass
except Exception as e:
    # å¼‚å¸¸æ—¶ï¼Œæ‰§è¡Œè¯¥å—
    print(e)
    # æ‰“å°è¡Œæ•°
    print(e.__traceback__.tb_lineno)
    ...
else:
    # å¦‚æœæ²¡æœ‰å¼‚å¸¸æ‰§è¡Œè¯¥å—
    print('else')
    pass
finally:
    # æ— è®ºå¼‚å¸¸ä¸å¦ï¼Œæœ€ç»ˆæ‰§è¡Œè¯¥å—
    print('finally')
    pass
```

    try 0/0 
    division by zero
    4
    finally
    

## for...else...

æ‰€è°“elseæŒ‡çš„æ˜¯å¾ªç¯æ­£å¸¸ç»“æŸåè¦æ‰§è¡Œçš„ä»£ç ï¼Œå³å¦‚æœæ˜¯breskç»ˆæ­¢å¾ªç¯çš„æƒ…å†µã€‚elseä¸‹æ–¹ç¼©è¿›çš„ä»£ç å°†ä¸æ‰§è¡Œã€‚


```python
str1 = 'hello'
for i in str1:
    print(i, end=' ')
else:
    print()
    print('end')
```

    h e l l o 
    end
    


```python
str1 = 'hello'
for i in str1:
    print(i, end=' ')
    if i == 'l':
        break
else:
    print()
    print('end')
```

    h e l 


```python

```

# 6. iterator_generator
## Iterator

1. è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯ä»¥è®°ä½éå†çš„ä½ç½®çš„å¯¹è±¡ã€‚è¿­ä»£å™¨å¯¹è±¡ä»é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰çš„å…ƒç´ è¢«è®¿é—®å®Œç»“æŸã€‚è¿­ä»£å™¨åªèƒ½å¾€å‰ä¸ä¼šåé€€ã€‚è¿­ä»£å™¨æœ‰ä¸¤ä¸ªåŸºæœ¬çš„æ–¹æ³•ï¼šiter() å’Œ next()ã€‚å­—ç¬¦ä¸²ï¼Œåˆ—è¡¨æˆ–å…ƒç»„å¯¹è±¡éƒ½å¯ç”¨äºåˆ›å»ºè¿­ä»£å™¨


```python
# ä½¿ç”¨iter()ä¸next()å‡½æ•°
arr = [1,2,3,4]
it = iter(arr)
print(next(it),end=",") # 1
print(next(it), end=",") # 2
for x in it:
    print(x,end=",") # 3 4
```

    1,2,3,4,

2. åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»ï¼Œè¯¥ç±»å¿…é¡»å®ç°ä¸¤ä¸ªæ–¹æ³• __iter__() ä¸ __next__()ã€‚


```python
class MyNumbers:
    def __iter__(self):
        self.a = 1
        return self
    def __next__(self):
        if self.a <= 3:
            x = self.a
            self.a += 1
            return x
        else:
            raise StopIteration # StopIterationå¼‚å¸¸ç”¨äºæ ‡è¯†è¿­ä»£çš„å®Œæˆ

myclass = MyNumbers()
myiter = iter(myclass)
for x in myiter:
    print(x,end=",") # 3
```

    1,2,3,

## Generator
ç”Ÿæˆå™¨å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„è¿­ä»£å™¨, ç”Ÿæˆå™¨çš„å®ç°æ˜¯åŸºäºå‡½æ•°. å†å‡½æ•°ä¸­ä½¿ç”¨å…³é”®å­—â€œyieldâ€ è€Œä¸æ˜¯é€šå¸¸ç”¨çš„return. yieldä½œä¸ºç”Ÿæˆå™¨æ‰§è¡Œçš„æš‚åœæ¢å¤ç‚¹, æ¯æ¬¡è°ƒç”¨next, ç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œåˆ°yieldè¯­å¥, ä¼šæŒ‚èµ·,å¹¶ä¿å­˜å½“å‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯. çŸ¥é“ä¸‹ä¸€ä¸ªnextè§¦å‘ç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œ.


```python
# ç”Ÿæˆå™¨å‡½æ•°
def my_gen():
    for x in range(3):
        yield x * x

mygen = my_gen()
for x in mygen:
    print(x,end=",") # 0 1 4

```

    0,1,4,

# 7. lambda
## Lambda Function

lambda å‡½æ•°æ˜¯ä¸€ç§å°å‹ã€åŒ¿åçš„ã€å†…è”å‡½æ•°ï¼Œå®ƒå¯ä»¥å…·æœ‰ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ã€‚

åŒ¿åå‡½æ•°ä¸éœ€è¦ä½¿ç”¨ def å…³é”®å­—å®šä¹‰å®Œæ•´å‡½æ•°ã€‚lambda å‡½æ•°é€šå¸¸ç”¨äºç¼–å†™ç®€å•çš„ã€å•è¡Œçš„å‡½æ•°ï¼Œé€šå¸¸åœ¨éœ€è¦å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¾‹å¦‚åœ¨ map()ã€filter()ã€reduce() ç­‰å‡½æ•°ä¸­ã€‚

lambda arguments(åŒ…æ‹¬å•ä¸ªå‚æ•°ä»¥åŠ*argï¼Œ**kwargs): expression


```python
f = lambda a, b: a + b
print(f(5,10))
```

    15
    


```python
f = lambda *args: sum(args)
print(f(1, 2, 3))  # è¾“å‡º: 6
```

    6
    

lambda å‡½æ•°é€šå¸¸ä¸å†…ç½®å‡½æ•°å¦‚ map()ã€filter() å’Œ reduce() ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨é›†åˆä¸Šæ‰§è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼š


```python
numbers = [1, 2, 3, 4, 5]
squared = list(map(lambda x: x**2, numbers))
print(squared)  # è¾“å‡º: [1, 4, 9, 16, 25]
```

    [1, 4, 9, 16, 25]
    


```python
# ä¸max()å‡½æ•°ä¸€èµ·ä½¿ç”¨
num = [(1, 2.9), (1.5, 3.2), (1.3, 4.0), (2.2, 2.8)]
x = max(num, key=lambda x: x[0]) # æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ 
print(x) # è¾“å‡º: (2.2, 2.8)
y = max(num, key=lambda x: x[1])
print(y)  # è¾“å‡º: (1.3, 4.0)
```

    (2.2, 2.8)
    (1.3, 4.0)
    


```python
# sorted()å‡½æ•°
num = [(1, 2.9), (1.5, 3.2), (1.3, 4.0), (2.2, 2.8)]
x = sorted(num, key=lambda x: x[0]) # æŒ‰ç¬¬ä¸€ä¸ªå…ƒç´ 
print(x) # è¾“å‡º: [(1, 2.9), (1.3, 4.0), (1.5, 3.2), (2.2, 2.8)]

```

    [(1, 2.9), (1.3, 4.0), (1.5, 3.2), (2.2, 2.8)]
    

# 8. ListComp_GenerateExpr
## åˆ—è¡¨æ¨å¯¼å¼
åˆ—è¡¨æ¨å¯¼å¼æ˜¯ Pythonä¸­ä¸€ç§å¿«é€Ÿåˆ›å»ºå’Œè½¬æ¢åˆ—è¡¨çš„æ–¹æ³•ã€‚å®ƒä»¬å¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸­ç”Ÿæˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œä½¿ç”¨æ–¹æ‹¬å·[]æ‹¬èµ·æ¥ã€‚åˆ—è¡¨æ¨å¯¼å¼å¯ä»¥é€šè¿‡å¯¹åŸå§‹åºåˆ—çš„å…ƒç´ è¿›è¡Œè¿ç®—æˆ–ç­›é€‰æ¥ç”Ÿæˆæ–°çš„åˆ—è¡¨ã€‚


```python
squares = [x ** 2 for x in range(1, 11)]
print(squares)  # [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
```

    [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
    

## ç”Ÿæˆå™¨è¡¨è¾¾å¼
ç”Ÿæˆå™¨è¡¨è¾¾å¼æ˜¯ Pythonä¸­ä¸€ç§åˆ›å»ºç”Ÿæˆå™¨çš„ç®€æ´è¯­æ³•ã€‚å®ƒä»¬ç±»ä¼¼äºåˆ—è¡¨æ¨å¯¼å¼ï¼Œä½†æ˜¯ä½¿ç”¨åœ†æ‹¬å·ï¼ˆï¼‰è€Œä¸æ˜¯æ–¹æ‹¬å·[]ã€‚ç”Ÿæˆå™¨è¡¨è¾¾å¼å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯è¿­ä»£çš„ç”Ÿæˆå™¨å¯¹è±¡ï¼Œç”¨äºé€ä¸ªç”Ÿæˆç»“æœï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„åˆ—è¡¨ã€‚è¿™ä½¿å¾—ç”Ÿæˆå™¨è¡¨è¾¾å¼éå¸¸é€‚åˆå¤„ç†å¤§å‹ã€æ— é™åºåˆ—æˆ–éœ€è¦èŠ‚çœå†…å­˜çš„æƒ…å†µã€‚

```
(è¡¨è¾¾å¼ for å˜é‡ in æºåºåˆ—)
(è¡¨è¾¾å¼ for å˜é‡ in æºåºåˆ— if æ¡ä»¶)
```

ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆå™¨å¯¹è±¡æœ‰__iter__()å’Œ__next__()é­”æœ¯æ–¹æ³•ï¼Œæ‰€ä»¥ç”Ÿæˆå™¨ä¹Ÿæ˜¯è¿­ä»£å™¨ï¼Œ


```python
num = (x**2 for x in range(10))
print(num) #<generator object <genexpr> at ???>
print(dir(num))
```

    <generator object <genexpr> at 0x000001E2349CA500>
    ['__class__', '__del__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__name__', '__ne__', '__new__', '__next__', '__qualname__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'close', 'gi_code', 'gi_frame', 'gi_running', 'gi_yieldfrom', 'send', 'throw']
    

æ—¢ç„¶ç”Ÿæˆå™¨æ˜¯è¿­ä»£å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è½¬æ¢å‡½æ•°æŠŠå®ƒè½¬æ¢ä¸ºå…ƒç»„æˆ–è€…åˆ—è¡¨ï¼š


```python
num = (x**2 for x in range(10))
numtuple = tuple(num)
print(numtuple)
#(0, 1, 4, 9, 16, 25, 36, 49, 64, 81)

num = (x**2 for x in range(10))
numlist = list(num)
print(numlist)
#[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
```

    (0, 1, 4, 9, 16, 25, 36, 49, 64, 81)
    [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
    

æ³¨æ„ä¸Šé¢çš„å†™æ³•ï¼Œç¬¬äºŒæ¬¡è½¬æ¢çš„æ—¶å€™æˆ‘ä»¬é‡æ–°ç”Ÿæˆnumï¼Œå¦‚æœä½ ä¸é‡æ–°ç”Ÿæˆï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼š


```python
num = (x**2 for x in range(10))
numtuple = tuple(num)
print(numtuple)
#(0, 1, 4, 9, 16, 25, 36, 49, 64, 81)

numlist = list(num)
print(numlist)
#[]
```

    (0, 1, 4, 9, 16, 25, 36, 49, 64, 81)
    []
    

è¿™æ˜¯å› ä¸ºnumå®ƒæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåœ¨å°†numè½¬æ¢ä¸ºtupleçš„æ—¶å€™ï¼Œè¿™ä¸ªè¿­ä»£å™¨å·²ç»è¿­ä»£åˆ°æœ«å°¾äº†ï¼Œä½ å†ä½¿ç”¨list()æ¥è½¬æ¢çš„æ—¶å€™ï¼Œå®ƒåªèƒ½æ˜¯è¿”å›ä¸€ä¸ªç©ºçš„åˆ—è¡¨ã€‚

è¿™å°±å¼•å‡ºäº†å…ƒç»„æ¨å¯¼å¼å’Œåˆ—ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„åŒºåˆ«ï¼Œå‰è€…å¾—åˆ°çš„æ˜¯ç”Ÿæˆå™¨æˆ–è€…è¿­ä»£å™¨ï¼Œåè€…å¾—åˆ°çš„æ˜¯åˆ—è¡¨ã€‚ç”Ÿæˆå™¨æœ‰ä¸¤ä¸ªç‰¹åˆ«é‡è¦çš„ç‰¹å¾ï¼š
- æƒ°æ€§è®¡ç®—ï¼šç”Ÿæˆå™¨è¡¨è¾¾å¼æ˜¯æƒ°æ€§è®¡ç®—çš„ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ ã€‚è¿™ä½¿å¾—ç”Ÿæˆå™¨è¡¨è¾¾å¼éå¸¸é€‚åˆå¤„ç†å¤§å‹æ•°æ®é›†æˆ–æ— é™åºåˆ—ã€‚
- å¤§å°å›ºå®šï¼šç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸ä¼šä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤å®ƒä»¬çš„å¤§å°æ˜¯å›ºå®šçš„ã€‚ä¸€æ—¦ç”Ÿæˆå™¨è¡¨è¾¾å¼ç”Ÿæˆäº†æ‰€æœ‰å…ƒç´ ï¼Œå®ƒå°±ä¼šè¢«è€—å°½ï¼Œæ— æ³•å†æ¬¡ä½¿ç”¨ã€‚

## ç”Ÿæˆå™¨è¡¨è¾¾å¼ vs. åˆ—è¡¨æ¨å¯¼å¼
ç”Ÿæˆå™¨è¡¨è¾¾å¼å’Œåˆ—è¡¨æ¨å¯¼å¼åœ¨è¯­æ³•å’ŒåŠŸèƒ½ä¸Šéå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯å’Œæ€§èƒ½æœ‰æ‰€ä¸åŒã€‚ä¸‹é¢æ˜¯å®ƒä»¬çš„æ¯”è¾ƒï¼š

1. å†…å­˜å ç”¨ï¼š*ç”Ÿæˆå™¨è¡¨è¾¾*å¼ä»¥æƒ°æ€§è®¡ç®—çš„æ–¹å¼é€ä¸ªç”Ÿæˆç»“æœï¼Œåªåœ¨éœ€è¦æ—¶ç”Ÿæˆä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤å ç”¨çš„å†…å­˜è¾ƒå°‘ã€‚è€Œ*åˆ—è¡¨æ¨å¯¼å¼*ä¼šä¸€æ¬¡æ€§ç”Ÿæˆæ•´ä¸ªåˆ—è¡¨ï¼Œå ç”¨çš„å†…å­˜è¾ƒå¤§ã€‚å¯¹äºå¤„ç†å¤§å‹æ•°æ®é›†æˆ–æ— é™åºåˆ—çš„æƒ…å†µï¼Œä½¿ç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼å¯ä»¥é¿å…å†…å­˜æº¢å‡ºã€‚
2. è¿è¡Œé€Ÿåº¦ï¼š*ç”Ÿæˆå™¨è¡¨è¾¾å¼*çš„æƒ°æ€§è®¡ç®—ä½¿å¾—å®ƒä»¬åœ¨æŸäº›æƒ…å†µä¸‹æ¯”*åˆ—è¡¨æ¨å¯¼å¼*æ›´å¿«ã€‚å¦‚æœåªéœ€è¦ä½¿ç”¨ç”Ÿæˆå™¨å¯¹è±¡çš„éƒ¨åˆ†å…ƒç´ ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåˆ—è¡¨ï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼ä¼šæ›´åŠ é«˜æ•ˆã€‚åˆ—è¡¨æ¨å¯¼å¼åœ¨åˆ›å»ºåˆ—è¡¨æ—¶éœ€è¦ä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹ä¼šæ›´æ…¢ã€‚
3. è¯­æ³•ï¼šç”Ÿæˆå™¨è¡¨è¾¾å¼ä½¿ç”¨åœ†æ‹¬å·()ï¼Œè€Œåˆ—è¡¨æ¨å¯¼å¼ä½¿ç”¨æ–¹æ‹¬å·[]ã€‚è¿™æ˜¯å®ƒä»¬åœ¨è¯­æ³•ä¸Šçš„åŒºåˆ«ï¼Œä½†å¹¶ä¸å½±å“å®ƒä»¬çš„åŠŸèƒ½ã€‚


```python
import time

start_time = time.time()
squares_gen = (x ** 2 for x in range(1, 1000001))
end_time = time.time()
gen_time = end_time - start_time

start_time = time.time()
squares_list = [x ** 2 for x in range(1, 1000001)]
end_time = time.time()
list_time = end_time - start_time

print("ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¿è¡Œæ—¶é—´ï¼š{}ç§’".format(gen_time))
print("åˆ—è¡¨æ¨å¯¼å¼çš„è¿è¡Œæ—¶é—´ï¼š{}ç§’".format(list_time))
```

    ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¿è¡Œæ—¶é—´ï¼š0.0ç§’
    åˆ—è¡¨æ¨å¯¼å¼çš„è¿è¡Œæ—¶é—´ï¼š0.2411341667175293ç§’
    

# 9. magic _function
## Magic Functions
https://blog.csdn.net/zhangke0426/article/details/122929667

python å®šä¹‰ç±»æ—¶ä¸­ï¼Œä»¥åŒä¸‹åˆ’çº¿å¼€å¤´ï¼Œä»¥åŒä¸‹åˆ’çº¿ç»“å°¾å‡½æ•°ä¸ºé­”æ³•å‡½æ•°

- é­”æ³•å‡½æ•°å¯ä»¥å®šä¹‰ç±»çš„ç‰¹æ€§
- é­”æ³•å‡½æ•°æ˜¯è§£é‡Šå™¨æä¾›çš„åŠŸèƒ½
- é­”æ³•å‡½æ•°åªèƒ½ä½¿ç”¨ python æä¾›çš„é­”æ³•å‡½æ•°ï¼Œä¸èƒ½è‡ªå®šä¹‰

å¸¸ç”¨çš„åŒ…æ‹¬ï¼š __ init__()ã€__ str__()ã€__ new__()ã€__ unicode__()ã€ __ call__()ã€ __ len__()ã€ __repr__()ã€__ setattr__()ã€ __ getattr__()ã€ __ getattribute__()ã€ __ delattr__()ã€__ setitem__()ã€ __ getitem__()ã€__ delitem__()ã€ __ iter__()ã€__ del__()ã€ __dir__()ã€__dict__()ã€__exit__()ï¼Œ__enter(), __all__()ç­‰å‡½æ•°ã€‚

### éæ•°å­¦è¿ç®—ç±»é­”æ³•å‡½æ•°

#### __str__ å’Œ __repr__
å‡æ˜¯ç”¨äºæ˜¾ç¤ºçš„ï¼Œ__str__ ç”¨äº printï¼Œ__repr__ ç”¨äºç›´æ¥æ˜¾ç¤º


```python
# __str__ å’Œ __repr__
class A:
    def __str__(self):
        return 'str'
    def __repr__(self):
        return 'repr'
a = A()
print(a) # ä½¿ç”¨printæ—¶ï¼Œè°ƒç”¨__str__å‡½æ•°
a # ä¸ä½¿ç”¨printæ—¶ï¼Œè°ƒç”¨__repr__å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰__repr__å‡½æ•°ï¼Œåˆ™è°ƒç”¨__str__å‡½æ•°ï¼ŒåŒç†ï¼Œå¦‚æœæ²¡æœ‰__str__å‡½æ•°ï¼Œåˆ™è°ƒç”¨__repr__å‡½æ•°
```

    str
    




    repr



#### é›†åˆã€åºåˆ—ç›¸å…³ï¼š__len__å‡½æ•°ã€__getitem__å‡½æ•°ã€__setitem__å‡½æ•°ã€__delitem__å‡½æ•°å’Œ__contains__å‡½æ•°


```python
# æ„å»ºä¸€ä¸ªç±»ï¼Œå±•ç¤ºä¸Šè¿°å‡½æ•°çš„ä½¿ç”¨
class A:
    def __init__(self, data):
        self.data = data
    def __len__(self):
        return len(self.data)
    def __getitem__(self, index):
        return self.data[index]
    def __setitem__(self, index, value):
        self.data[index] = value
    def __delitem__(self, index):
        del self.data[index]
    def __contains__(self, value):
        return value in self.data
a = A([1, 2, 3, 4, 5])
print(len(a)) # è°ƒç”¨__len__å‡½æ•°
print(a[0]) # è°ƒç”¨__getitem__å‡½æ•°
a[0] = 10 # è°ƒç”¨__setitem__å‡½æ•°
print(a[0]) # è°ƒç”¨__getitem__å‡½æ•°
del a[0] # è°ƒç”¨__delitem__å‡½æ•°
print(a[0]) # è°ƒç”¨__getitem__å‡½æ•°
print(10 in a) # è°ƒç”¨__contains__å‡½æ•°
```

    5
    1
    10
    2
    False
    

#### __call__å‡½æ•°
è¯¥æ–¹æ³•çš„åŠŸèƒ½ç±»ä¼¼äºåœ¨ç±»ä¸­é‡è½½ () è¿ç®—ç¬¦ï¼Œä½¿å¾—ç±»å®ä¾‹å¯¹è±¡å¯ä»¥åƒè°ƒç”¨æ™®é€šå‡½æ•°é‚£æ ·ï¼Œä»¥â€œå¯¹è±¡å()â€çš„å½¢å¼ä½¿ç”¨ã€‚ä½œç”¨ï¼šä¸ºäº†å°†ç±»çš„å®ä¾‹å¯¹è±¡å˜ä¸ºå¯è°ƒç”¨å¯¹è±¡ã€‚


```python
# __call__å‡½æ•°
class A:
    def __call__(self, *args, **kwargs):
        print('call')
a = A()
a() # è°ƒç”¨__call__å‡½æ•°
```

    call
    

#### __exit__ å’Œ __enter__ å‡½æ•°
__exit__å’Œ__enter__å‡½æ•°æ˜¯ä¸withè¯­å¥çš„ç»„åˆåº”ç”¨çš„ï¼Œç”¨äºä¸Šä¸‹æ–‡ç®¡ç†ã€‚

1. __enter(self)__ï¼šè´Ÿè´£è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥è¿”å›å€¼å°†èµ‹å€¼ç»™aså­å¥åé¢çš„var_nameï¼Œé€šå¸¸è¿”å›å¯¹è±¡è‡ªå·±ï¼Œå³â€œselfâ€ã€‚å‡½æ•°ä¼˜å…ˆäºwithåé¢çš„â€œä»£ç å—â€(statements1,statements2,â€¦â€¦)è¢«æ‰§è¡Œã€‚

2. __exit__(self, exc_type, exc_val, exc_tb)ï¼šè´Ÿè´£æ‰§è¡Œâ€œæ¸…ç†â€å·¥ä½œï¼Œæ¯”å¦‚é‡Šæ”¾èµ„æºç­‰ã€‚å‡½æ•°åœ¨withåé¢çš„â€œä»£ç å—â€(statements1,statements2,â€¦â€¦)æ‰§è¡Œå®Œæ¯•åè¢«è°ƒç”¨ï¼Œå³â€œä»£ç å—â€æ‰§è¡Œå®Œæ¯•åï¼Œæ‰§è¡Œ__exit__å‡½æ•°ã€‚


```python
# __enter__å‡½æ•°
class A:
    def __enter__(self):
        print('enterä¸­çš„é€»è¾‘')
        return self
    def __exit__(self, exc_type, exc_val, exc_tb):
        print('exitä¸­çš„é€»è¾‘')

with A() as a:
    print('è¿›å…¥withçš„é€»è¾‘')
```

    enterä¸­çš„é€»è¾‘
    è¿›å…¥withçš„é€»è¾‘
    exitä¸­çš„é€»è¾‘
    

ä¸€ä¸ªå¸¸è§çš„ç”¨é€”æ˜¯åœ¨pytorchä¸­ä½¿ç”¨withè¯­å¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```python
import torch
with torch.no_grad():
    # ä¸è¿›è¡Œæ¢¯åº¦æ›´æ–°
    pass
```
è€Œåœ¨æ”¹ç±»ä¸­å®é™…ä¸Šæ˜¯ä½¿ç”¨äº†__enter__å’Œ__exit__å‡½æ•°ã€‚
```python
import torch
def __enter__(self) -> None:
    self.prev = torch.is_grad_enabled()
    torch.set_grad_enabled(False)
def __exit__(self, exc_type: Any, exc_value: Any, traceback: Any) -> None:
    torch.set_grad_enabled(self.prev)
```


#### __new__å‡½æ•°ä¸__init__å‡½æ•°
1. __new__å‡½æ•°ï¼šç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ **ç±»ï¼ˆé™æ€ï¼‰** æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚è¯¥æ–¹æ³•åœ¨__init__æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œç”¨äºåˆ›å»ºå®ä¾‹å¯¹è±¡ã€‚__new__æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯clsï¼Œè¡¨ç¤ºè¦å®ä¾‹åŒ–çš„ç±»ï¼Œå…¶ä½™å‚æ•°å°†ä¼šä¼ é€’ç»™__init__æ–¹æ³•ã€‚
2. __init__å‡½æ•°ï¼šç”¨äºåˆå§‹åŒ–å¯¹è±¡ï¼Œæ˜¯å®ä¾‹æ–¹æ³•ï¼Œä¸è¿”å›ä»»ä½•å†…å®¹ã€‚è¯¥æ–¹æ³•åœ¨__new__æ–¹æ³•ä¹‹åè°ƒç”¨ï¼Œç”¨äºåˆå§‹åŒ–å®ä¾‹å¯¹è±¡ã€‚__init__æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯selfï¼Œè¡¨ç¤ºå®ä¾‹å¯¹è±¡æœ¬èº«ï¼Œå…¶ä½™å‚æ•°å°†ä¼šä¼ é€’ç»™__new__æ–¹æ³•ã€‚
3. __new__å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œè€Œ__init__å‡½æ•°æ²¡æœ‰è¿”å›å€¼ã€‚Pythonä¸­çœŸæ­£çš„æ„é€ æ–¹æ³•æ˜¯__new__ æ–¹æ³•ï¼Œ__init__æ–¹æ³•åªæ˜¯ç”¨æ¥å°†ä¼ å…¥çš„å‚æ•°åˆå§‹åŒ–åˆ°å®ä¾‹å¯¹è±¡ä¸­ã€‚


```python
# pythonä¸­ä½¿ç”¨__new__å‡½æ•°å®ç°å•ä¾‹æ¨¡å¼
class Singleton:
    _instance = None
    def __new__(cls, *args, **kwargs):
        print('__new__')
        if not cls._instance:
            print('create instance')
            cls._instance = super(Singleton, cls).__new__(cls)
        return cls._instance
    def __init__(self, name):
        print('__init__')
        self.name = name
a = Singleton('a')
b = Singleton('c')
print(a)
print(b)
print(b.name)
```

    __new__
    create instance
    __init__
    __new__
    __init__
    <__main__.Singleton object at 0x000001AF033D06A0>
    <__main__.Singleton object at 0x000001AF033D06A0>
    c
    

4. ä¸€äº›å…³äº__new__çš„åº”ç”¨:TODO

#### __getattr__ã€__setattr__ã€__delattr__å‡½æ•°
1. å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæç¤ºæˆ‘ä»¬ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ã€‚è€Œè¿™ä¸ªå¼‚å¸¸å°±æ˜¯__getattr__æ–¹æ³•æŠ›å‡ºçš„
2. __setattr__æ–¹æ³•ç”¨äºè®¾ç½®å±æ€§å€¼ï¼Œå½“æˆ‘ä»¬è®¾ç½®å±æ€§å€¼çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•
3. __delattr__æ–¹æ³•ç”¨äºåˆ é™¤å±æ€§å€¼ï¼Œå½“æˆ‘ä»¬åˆ é™¤å±æ€§å€¼çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•


```python
# __getattr__ã€__setattr__ã€__delattr__å‡½æ•°
class A:
    def __init__(self):
        self.data = {'a': 123}
    def __getattr__(self, name):
        print('getattr')
        return self.data[name] #  å¦‚æœä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸
    def __setattr__(self, name, value):
        print('setattr')
        self.__dict__[name] = value
    def __delattr__(self, name):
        print('delattr')
        del self.__dict__[name]
a = A()
print(a.__dict__)
print(a.a) # è°ƒç”¨__getattr__å‡½æ•°
a.b = 123 # è°ƒç”¨__setattr__å‡½æ•°
print(a.__dict__)
del a.b # è°ƒç”¨__delattr__å‡½æ•°
print(a.__dict__)
```

    setattr
    {'data': {'a': 123}}
    getattr
    123
    setattr
    {'data': {'a': 123}, 'b': 123}
    delattr
    {'data': {'a': 123}}
    

#### __getattribute__ï¼Œ__setattr__

1. __getattribute__ï¼šè¯¥æ–¹æ³•åœ¨è®¿é—®å±æ€§æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œæ— è®ºå±æ€§æ˜¯å¦å­˜åœ¨ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä¼˜å…ˆçº§é«˜äº__getattr__æ–¹æ³•ã€‚å¦‚æœç±»ä¸­å®šä¹‰äº†__getattribute__æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è®¿é—®å±æ€§æ—¶ï¼Œå°±ä¼šè°ƒç”¨__getattribute__æ–¹æ³•ï¼Œè€Œä¸ä¼šè°ƒç”¨__getattr__æ–¹æ³•ã€‚__getattribute__æ˜¯å±æ€§è®¿é—®æ‹¦æˆªå™¨ï¼Œå°±æ˜¯å½“è¿™ä¸ªç±»çš„å±æ€§è¢«è®¿é—®æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ç±»çš„__getattribute__æ–¹æ³•ã€‚
2. __setattr__ï¼šè¯¥æ–¹æ³•åœ¨è®¾ç½®å±æ€§æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œæ— è®ºå±æ€§æ˜¯å¦å­˜åœ¨ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä¼˜å…ˆçº§é«˜äº__setattr__æ–¹æ³•ã€‚å¦‚æœç±»ä¸­å®šä¹‰äº†__setattr__æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨è®¾ç½®å±æ€§æ—¶ï¼Œå°±ä¼šè°ƒç”¨__setattr__æ–¹æ³•ï¼Œè€Œä¸ä¼šè°ƒç”¨__setattr__æ–¹æ³•ã€‚__setattr__æ˜¯å±æ€§è®¾ç½®æ‹¦æˆªå™¨ï¼Œå°±æ˜¯å½“è¿™ä¸ªç±»çš„å±æ€§è¢«è®¾ç½®æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ç±»çš„__setattr__æ–¹æ³•ã€‚
3. __getattribute__å’Œ__setattr__æ–¹æ³•çš„ä¼˜å…ˆçº§é«˜äº__getattr__å’Œ__setattr__æ–¹æ³•ã€‚

#### __dir__å‡½æ•°

1. dir() å‡½æ•°ï¼Œé€šè¿‡æ­¤å‡½æ•°å¯ä»¥æŸä¸ªå¯¹è±¡æ‹¥æœ‰çš„æ‰€æœ‰çš„å±æ€§åå’Œæ–¹æ³•åï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æœ‰æ‰€æœ‰å±æ€§åå’Œæ–¹æ³•åçš„æœ‰åºåˆ—è¡¨ã€‚

### æ•°å­¦è¿ç®—ç±»é­”æ³•å‡½æ•°
1. ç±»ä¼¼äºè¿ç®—ç¬¦é‡è½½ï¼Œå¯ä»¥è‡ªå®šä¹‰ç±»çš„è¿ç®—ç¬¦
2. åŒ…æ‹¬__ add__ã€__sub__ã€__mul__ã€__truediv__ã€__floordiv__ã€__mod__ã€__pow__ã€__and__ã€__or__ã€__xor__ã€__lshift__ã€__rshift__ã€__neg__ã€__pos__ã€__abs__ã€__invert__ã€__iadd__ã€__isub__ã€__imul__ã€__itruediv__ã€__ifloordiv__ã€__imod__ã€__ipow__ã€__iand__ã€__ior__ã€__ixor__ã€__ilshift__ã€__irshift__ã€__complex__ã€__int__ã€__float__ã€__round__ã€__index__ç­‰å‡½æ•°ã€‚

# 10. numerical
## æ•°å­—è¡¨ç¤ºæ–¹æ³•æ‹“å±•


```python
import math

# é•¿æ•´å‹
a = 1_000_000_000_000
# ç§‘å­¦è®¡æ•°æ³•
b = 1e3 # 1 * 10^3
# åå…­è¿›åˆ¶
c = 0x10
# å…«è¿›åˆ¶
d = 0o1007
# äºŒè¿›åˆ¶
e = 0b1010
# æ— ç©·å¤§
f = float('inf')
# è´Ÿæ— ç©·å¤§
g = float('-inf')
```


```python
# mathåº“ä¸­çš„infæ›´çœç©ºé—´
arr = [math.inf, math.inf, float('inf'), float('inf')]
for i in arr:
    print(id(i))
# å‰ä¸¤è€…çš„idç›¸åŒï¼Œåä¸¤è€…çš„idä¸åŒ
```

    1412144834544
    1412144834544
    1412215496784
    1412250463056
    


```python
print(0.0 == -0.0) # True
print(0.0 is -0.0) # False
print(0 is -0) # True,åŸå› æ˜¯pythonä¼šå°†å¸¸ç”¨çš„æ•´æ•°ç¼“å­˜èµ·æ¥ï¼Œ-5åˆ°256ä¹‹é—´çš„æ•´æ•°ä¼šè¢«ç¼“å­˜
a = 256
b = 256
print(a is b) # True
a = 257
b = 257
print(a is b) # False
```

    True
    False
    True
    True
    False
    

    <>:2: SyntaxWarning: "is" with a literal. Did you mean "=="?
    <>:3: SyntaxWarning: "is" with a literal. Did you mean "=="?
    <>:2: SyntaxWarning: "is" with a literal. Did you mean "=="?
    <>:3: SyntaxWarning: "is" with a literal. Did you mean "=="?
    C:\Users\cyberloafing\AppData\Local\Temp\ipykernel_14020\278747429.py:2: SyntaxWarning: "is" with a literal. Did you mean "=="?
      print(0.0 is -0.0) # False
    C:\Users\cyberloafing\AppData\Local\Temp\ipykernel_14020\278747429.py:3: SyntaxWarning: "is" with a literal. Did you mean "=="?
      print(0 is -0) # True,åŸå› æ˜¯pythonä¼šå°†å¸¸ç”¨çš„æ•´æ•°ç¼“å­˜èµ·æ¥ï¼Œ-5åˆ°256ä¹‹é—´çš„æ•´æ•°ä¼šè¢«ç¼“å­˜
    


```python

```

# 11. pass
## ...
1. ä¸‰ä¸ªç‚¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ`Ellipsis`ï¼Œ
2. åœ¨ç¼©è¿›ä»£ç å—ä¸­ç­‰ä»·äº`pass`ï¼Œè¡¨ç¤ºä»€ä¹ˆä¹Ÿä¸åš
3. åœ¨å‡½æ•°å®šä¹‰æ—¶ä½œä¸ºé»˜è®¤å‚æ•°


```python
print(...)
print(bool(...))
print(id(Ellipsis))
print(id(...))
print(type(...))
```

    Ellipsis
    True
    140727128477336
    140727128477336
    <class 'ellipsis'>
    


```python
def func1(a: int=...):
    print(a)
func1(23)  # 68
func1()  # Ellipsis
func1(...)  # Ellipsis
```

    This is a beautiful object.
    23
    Ellipsis
    Ellipsis
    

## pass
passè¯­å¥æ˜¯ä¸€ä¸ªç©ºæ“ä½œè¯­å¥ï¼Œè¡¨ç¤ºä»€ä¹ˆä¹Ÿä¸åšã€‚å®ƒå¸¸ç”¨äºå ä½ï¼Œä»¥é¿å…è¯­æ³•é”™è¯¯ã€‚åœ¨æ‰§è¡Œåˆ°passè¯­å¥æ—¶ï¼Œç¨‹åºä¸ä¼šæœ‰ä»»ä½•æ“ä½œï¼Œç›´æ¥è·³è¿‡å¹¶ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥

# 12. ternary_op
## pythonä¸­çš„ä¸‰ç›®è¿ç®—ç¬¦
### å½¢å¼1
condition_is_true if condition else condition_is_false


```python
a = 2
print('a is 2' if a == 2 else 'a is not 2')
```

    a is 2
    

### å½¢å¼2
(if_test_is_false, if_test_is_true)[test]


```python
res = ('a is not 2', 'a is 2')[a == 2]
print(res)
```

    a is 2
    


```python

```

# 13. textcolor
## åœ¨ç»ˆç«¯ä¸­è¾“å‡ºå½©è‰²å­—ä½“
å¯ä»¥ä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—æ¥æ‰“å°ä¸åŒé¢œè‰²çš„æ–‡æœ¬ã€‚ANSI è½¬ä¹‰åºåˆ—æ˜¯ä¸€ç§ç”¨äºæ§åˆ¶æ–‡æœ¬è¾“å‡ºæ ¼å¼å’Œé¢œè‰²çš„ç‰¹æ®Šå­—ç¬¦åºåˆ—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—æ‰“å°ç»¿è‰²å’Œçº¢è‰²æ–‡æœ¬çš„ç¤ºä¾‹ï¼š

print(\033[æ˜¾ç¤ºæ–¹å¼;å‰æ™¯è‰²;èƒŒæ™¯è‰²m + æ‰“å°å†…å®¹ + ç»“å°¾éƒ¨åˆ†ï¼š\033[0m)


```python
green_text = '\033[32mThis is green text\033[0m'
red_text = '\033[31mThis is red text\033[0m'

print(green_text)
print(red_text)
```

    [32mThis is green text[0m
    [31mThis is red text[0m
    


```python
def print_c(data,display=0,front=32,back=0):
    print(f"\033["
          f"{display};" # æ˜¾ç¤ºæ–¹å¼
          f"{front};" # å‰æ™¯è‰²
          f"{back}m" # èƒŒæ™¯è‰²
          f"{data}"
          f"\033[0m")

print_c("=================",display=4,front=32,back=32)
```

    [4;32;32m=================[0m
    

## åœ¨juptyer notebookä¸­è¾“å‡ºå½©è‰²å­—ä½“


```python
from IPython.display import display, HTML

def print_red(text):
    display(HTML(f'<font color="red">{text}</font>'))
print_red('è¿™æ˜¯çº¢è‰²çš„æ–‡æœ¬')
```


<font color="red">è¿™æ˜¯çº¢è‰²çš„æ–‡æœ¬</font>



```python

```

